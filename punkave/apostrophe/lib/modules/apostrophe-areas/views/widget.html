{# widget always knows its options and data for player use. #}
{# however ginormous joined objects are elided. Use APIs to #}
{# get them if you need them (TODO: consider ways of #}
{# whitelisting them for the inline JSON attributes) #}

<div data-widget="{{ data.widget.type }}" data='{{ data.dataFiltered | jsonAttribute({ single: true }) }}' data-options='{{ apos.utils.omit(data.options, 'area') | jsonAttribute({ single: true }) }}'>
  {%- if data.widget._edit -%}
    {%- include 'widgetControls.html' -%}
  {%- endif -%}
  {{ data.output() | safe }}
</div>
